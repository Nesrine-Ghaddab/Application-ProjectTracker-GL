{% extends 'base.html' %}
{% load static %}

{% block title %}Supprimer le projet - Personal Tracker{% endblock %}

{% block content %}
<!-- ===== Delete Confirmation Start ===== -->
<section class="pg ji gp uq">
  <div class="bb ze ki xn 2xl:ud-px-0">
    
    <div class="animate_top on/5 gq/2 bb">
      <!-- Warning Card -->
      <div class="sg hh rm vk xm yh kh/20 rj">
        <!-- Warning Icon -->
        <div class="tc wf xf cf ae cd rg kh bb fb">
          <svg class="lk" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
            <line x1="12" y1="9" x2="12" y2="13"></line>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
        </div>

        <h2 class="fk vj kk wm rj fb">Supprimer le projet</h2>

        <!-- Warning Message -->
        <div class="sg kh/20 pm _g kh fb">
          <div class="tc wf ag">
            <svg class="kh bf" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
            <div>
              <p class="ek kk">
                Êtes-vous sûr de vouloir supprimer le projet "{{ project.title }}" ?
              </p>
              <p class="uj kh ac">
                Cette action est irréversible. Toutes les tâches associées seront également supprimées.
              </p>
            </div>
          </div>
        </div>

        <!-- Project Info -->
        <div class="sg qh pm fb">
          <h4 class="ek bk kk wm fb">Détails du projet :</h4>
          <ul class="uj pk">
            <li class="tc wf ag fb">
              <svg class="vh we" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
              <span>Titre : {{ project.title }}</span>
            </li>
            <li class="tc wf ag fb">
              <svg class="vh we" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
              <span>Date limite : {{ project.deadline }}</span>
            </li>
            <li class="tc wf ag fb">
              <svg class="vh we" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
              <span>Progression : {{ project.progress }}%</span>
            </li>
            {% if project.tasks.exists %}
            <li class="tc wf ag fb">
              <svg class="vh we" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
              <span>{{ project.tasks.count }} tâche(s) associée(s)</span>
            </li>
            {% endif %}
          </ul>
        </div>

        <!-- Action Buttons -->
        <form method="post">
          {% csrf_token %}
          <div class="tc xf gap-3">
            <a href="{% url 'projects:project_detail' project.pk %}"
               class="vc rg ml il hi gi ph xl _g ch">
              <svg class="uh ub" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
              Annuler
            </a>
            <button type="submit"
                    class="vc rg lk kh ml il hi gi cm">
              <svg class="uh ub" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
              </svg>
              Confirmer la suppression
            </button>
          </div>
        </form>
      </div>
    </div>

  </div>
</section>
<!-- ===== Delete Confirmation End ===== -->
{% endblock %}

{% block extra_scripts %}
<script>
  // Confirmation animation
  document.addEventListener('DOMContentLoaded', function() {
    const deleteBtn = document.querySelector('button[type="submit"]');
    
    deleteBtn.addEventListener('click', function(e) {
      if (!confirm('Confirmez-vous la suppression définitive de ce projet ?')) {
        e.preventDefault();
      }
    });
  });
</script>
{% endblock %}